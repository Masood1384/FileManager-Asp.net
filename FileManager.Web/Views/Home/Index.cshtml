@using static FileManager.Web.Controllers.FolderController
@model MainModel
@{
    ViewData["Title"] = "Home Page";
}


    <!-- SideBar Start -->
    <aside class="sidebar float-lt">
        <div class="brand text-center loading">
            <a class="link" href="#">
                <h3 class="name">FileManager</h3>
                <!--
                    If you want to add an image as a brand add the class 'logo' to it
                    <img class="logo" src="logo.png">
                -->
            </a>
        </div>
    <partial name="../Partials/_MenuFileAndFolder" model="@Model" />
        <div class="bottom text-center">
            <button class="btn-primary" type="button">
                logout
            </button>
        </div>
    </aside>
    <!-- Sidebar End -->
    <!-- Main Panel Start -->
    <main class="main-panel float-lt">
        <!-- Header Start -->
        <header class="header loading">
            <form class="search-form float-lt">
                <label>
                    <svg class="svg-icon" fill="none" height="45" viewBox="0 0 45 45" width="45"
                         xmlns="http://www.w3.org/2000/svg">
                        <path clip-rule="evenodd"
                              d="M29.0472 16.2524C29.0472 22.957 23.5029 28.5047 16.5236 28.5047C9.54434 28.5047 4 22.957 4 16.2524C4 9.54773 9.54434 4 16.5236 4C23.5029 4 29.0472 9.54773 29.0472 16.2524ZM26.267 29.38C23.5352 31.3448 20.1671 32.5047 16.5236 32.5047C7.39787 32.5047 0 25.2283 0 16.2524C0 7.27643 7.39787 0 16.5236 0C25.6493 0 33.0472 7.27643 33.0472 16.2524C33.0472 20.2142 31.606 23.845 29.211 26.665L43.4625 40.6826C44.25 41.4571 44.2605 42.7234 43.4859 43.5109C42.7113 44.2984 41.4451 44.3089 40.6576 43.5343L26.267 29.38Z"
                              fill="white"
                              fill-rule="evenodd" />
                    </svg>
                    <input class="search-input" name="filename" placeholder="Search files ..." type="text">
                </label>
            </form>
            <div class="float-rt">
                <button class="btn-icon-reset toggle-slidebar" type="button">
                </button>

            </div>
        </header>
        <!-- Header End -->
        <!-- Toolbar Start -->
        <div class="toolbar">
            <nav>
                <ul class="list-inline loading">
                    <li class="toolbar-item">
                        <button class="btn-svg no-focus" type="button" data-action="home">
                            <svg fill="none" height="18" viewBox="0 0 20 18" width="20"
                                 xmlns="http://www.w3.org/2000/svg">
                                <path d="M19.5861 8.85253L10.499 0.197127C10.4336 0.134638 10.3559 0.085062 10.2703 0.0512365C10.1847 0.017411 10.093 0 10.0004 0C9.90779 0 9.81608 0.017411 9.73053 0.0512365C9.64497 0.085062 9.56726 0.134638 9.50183 0.197127L0.414754 8.85253C0.150017 9.10487 0 9.44764 0 9.80513C0 10.5474 0.633161 11.151 1.41193 11.151H2.36939V17.3271C2.36939 17.6993 2.68487 18 3.07535 18H8.58849V13.2896H11.0594V18H16.9255C17.316 18 17.6314 17.6993 17.6314 17.3271V11.151H18.5889C18.9639 11.151 19.3235 11.0101 19.5883 10.7556C20.1376 10.2299 20.1376 9.37824 19.5861 8.85253Z"
                                      fill="#364F6B" />
                            </svg>
                            <span class="btn-text">
                                Home
                            </span>
                        </button>
                    </li>
                    <li class="toolbar-item">
                        <button class="btn-svg" type="button" data-action="back">
                            <svg class="svg-icon" fill="none" height="20" viewBox="0 0 13 20" width="13"
                                 xmlns="http://www.w3.org/2000/svg">
                                <path d="M10.5603 0.356966L0.515921 8.88871C0.354104 9.02623 0.224213 9.19682 0.135161 9.38878C0.0461077 9.58074 0 9.78952 0 10.0008C0 10.2121 0.0461077 10.4209 0.135161 10.6128C0.224213 10.8048 0.354104 10.9754 0.515921 11.1129L10.5603 19.6446C11.5191 20.4589 13 19.7838 13 18.5325V1.46662C13 0.215361 11.5191 -0.459708 10.5603 0.356966Z"
                                      fill="#364F6B" />
                            </svg>
                            <span class="btn-text">
                                Back
                            </span>
                        </button>
                    </li>
                    <li class="toolbar-item">
                        <button class="btn-svg btn-icon-reset no-focus" type="button" data-action="forward">
                            <svg class="svg-icon" fill="none" height="20" viewBox="0 0 13 20" width="13"
                                 xmlns="http://www.w3.org/2000/svg">
                                <path d="M2.43967 0.356966L12.4841 8.88871C12.6459 9.02623 12.7758 9.19682 12.8648 9.38878C12.9539 9.58074 13 9.78952 13 10.0008C13 10.2121 12.9539 10.4209 12.8648 10.6128C12.7758 10.8048 12.6459 10.9754 12.4841 11.1129L2.43967 19.6446C1.48092 20.4589 -5.3295e-07 19.7838 -5.3295e-07 18.5325V1.46662C-5.3295e-07 0.215361 1.48092 -0.459708 2.43967 0.356966Z"
                                      fill="#364F6B" />
                            </svg>
                            <span class="btn-text">
                                Forward
                            </span>
                        </button>
                    </li>
                    <li class="toolbar-item">
                        <button class="btn-svg btn-icon-reset no-focus files-select" type="button">
                            <svg class="svg-icon" fill="none" height="27" viewBox="0 0 27 27" width="27"
                                 xmlns="http://www.w3.org/2000/svg">
                                <path d="M21.75 6V21.75H6V6H21.75ZM21.75 3.75H6C4.7625 3.75 3.75 4.7625 3.75 6V21.75C3.75 22.9875 4.7625 24 6 24H21.75C22.9875 24 24 22.9875 24 21.75V6C24 4.7625 22.9875 3.75 21.75 3.75Z"
                                      fill="#364F6B" />
                                <path d="M11.7902 16.6924L8.58982 13.6605L7.5 14.6857L11.7902 18.75L21 10.0252L19.9179 9L11.7902 16.6924Z"
                                      fill="#364F6B" />
                            </svg>
                            <span class="btn-text">
                                Select All
                            </span>
                        </button>
                    </li>
                    <li class="toolbar-item">
                        <button class="btn-svg btn-icon-reset no-focus files-unselect" type="button">
                            <svg class="svg-icon" fill="none" height="20" viewBox="0 0 20 20" width="20"
                                 xmlns="http://www.w3.org/2000/svg">
                                <path d="M17.7778 2.22222V17.7778H2.22222V2.22222H17.7778ZM17.7778 0H2.22222C1 0 0 1 0 2.22222V17.7778C0 19 1 20 2.22222 20H17.7778C19 20 20 19 20 17.7778V2.22222C20 1 19 0 17.7778 0Z"
                                      fill="#364F6B" />
                            </svg>
                            <span class="btn-text">
                                Unselect All
                            </span>
                        </button>
                    </li>
                </ul>
            </nav>
        </div>
        <!-- Toolbar End -->
        <!-- Table Start -->
        <div class="table-section">
            <div class="loader"></div>
            <table class="files-table">
                <thead>
                    <tr>
                        <th>
                            <label class="checkbox">
                                <input class="files-select-all" type="checkbox">
                                <span class="checkbox-text"></span>
                            </label>
                        </th>
                        <th>name</th>
                        <th>size</th>
                        <th>Added time</th>
                        <th>modified time</th>
                        <th>more</th>
                    </tr>
                </thead>
                <tbody>
                <form asp-action="Tool" asp-controller="Folder" method="post" asp-route-folderId="@Model.FolderId">
                    <!-- Remove File Modal Start -->
                    <div class="modal remove-file-modal" id="removeFileModal">
                        <div class="modal-header">
                            <h3 class="modal-title float-lt">remove file</h3>
                            <button class="close float-rt btn-icon-reset" data-close="modal" type="button">
                                ×
                            </button>
                        </div>
                        <div class="modal-body">
                            <h3 class="w-medium">are you sure to remove <span class="filename badge"></span> ?</h3>
                            <div class="alert error">
                                <strong>error!</strong>
                                <span class="text"></span>
                            </div>
                        </div>
                        <div class="modal-footer text-right">
                            <input type="hidden" name="folderId" value="@Model.FolderId" />
                            @* <button class="btn-secondary" id="removeFileBtn" type="submit">
                                Yes
                            </button> *@
                            <input type="submit" class="btn-secondary" id="removeFileBtn" value="Yes" asp-route-controllerState="@ContrallerState.Remove" asp-action="Tool" asp-controller="Folder" />
                            <button class="btn-outline close-modal" data-close="modal" type="button">
                                No
                            </button>
                        </div>
                    </div>
                    <!-- Remove File Modal End -->
                    <!-- Move File Modal Start -->
                    <div class="modal move-file-modal" id="moveFileModal">
                        <div class="modal-header">
                            <h3 class="modal-title float-lt">move file</h3>
                            <button class="close float-rt btn-icon-reset" data-close="modal" type="button">
                                ×
                            </button>
                        </div>
                        <div class="modal-body">
                            <h4 class="moving-to">
                                moving <span class="source badge"></span>
                                to <span class="destination badge">css/plugins/codemirror</span>
                            </h4>
                            <partial name="../Partials/_MovePanel" model="@Model.Folder">
                                <div class="alert error">
                                    <strong>error!</strong>
                                    <span class="text"></span>
                                </div>
                        </div>
                        <div class="modal-footer text-right">
                            @* <button class="btn-secondary" id="moveFileBtn" type="submit">
                                move
                            </button> *@
                            <input type="submit" class="btn-secondary" id="moveFileBtn" value="Yes" asp-route-controllerState="@ContrallerState.Move" asp-action="Tool" asp-controller="Folder" />
                            <button class="btn-outline" data-close="modal" type="button">
                                cancel
                            </button>
                        </div>
                    </div>
                    <!-- Move File Modal End -->
                    <!-- Rename File Modal Start -->
                    <div class="modal rename-file-modal" id="renameFileModal">
                        <div class="modal-header">
                            <h3 class="modal-title float-lt">rename file</h3>
                            <button class="close float-rt btn-icon-reset" data-close="modal" type="button">
                                ×
                            </button>
                        </div>
                        <div class="modal-body">
                            <div class="input-field">
                                <label for="newFileName">New Name for<span class="name-for badge"></span></label>
                                <input id="newFileName" name="name" placeholder="New Name" type="text">
                            </div>
                            <div class="alert error">
                                <strong>error!</strong>
                                <span class="text"></span>
                            </div>
                        </div>
                        <div class="modal-footer text-right">
                            @* <button class="btn-secondary" id="renameFileBtn" type="button">
                                rename
                            </button> *@
                            <input type="submit" class="btn-secondary" id="renameFileBtn" value="rename" asp-route-controllerState="@ContrallerState.Edit" asp-action="Tool" asp-controller="Folder" />
                            <button class="btn-outline" data-close="modal" type="button">
                                cancel
                            </button>
                        </div>
                    </div>
                    <!-- Rename File Modal End -->
                    <partial name="../Partials/_Main" model="@Model" />
                    </form>
                
                </tbody>
            </table>
        </div>
        <!-- Table End -->
        <!-- Footer Start -->
        <footer class="footer loading">
            <div class="left-buttons float-lt">
                <button class="btn-big-svg btn-icon-reset" data-action="add-folder" data-modal="#addFolderModal"
                        type="button">
                    <svg fill="none" height="42" viewBox="0 0 51 42" width="51" xmlns="http://www.w3.org/2000/svg">
                        <path d="M48.96 7.32439H26.0737L18.5959 0.140853C18.5007 0.0513972 18.3756 0.00112233 18.2453 0H2.04C0.911625 0 0 0.915549 0 2.04878V39.9512C0 41.0845 0.911625 42 2.04 42H48.96C50.0884 42 51 41.0845 51 39.9512V9.37317C51 8.23994 50.0884 7.32439 48.96 7.32439ZM33.15 25.1616C33.15 25.4049 32.9332 25.6098 32.6719 25.6098H27.285V31.0454C27.285 31.2951 27.081 31.5 26.8387 31.5H24.1612C23.919 31.5 23.715 31.2951 23.715 31.0454V25.6098H18.3281C18.0667 25.6098 17.85 25.4049 17.85 25.1616V22.4726C17.85 22.2293 18.0667 22.0244 18.3281 22.0244H23.715V16.5887C23.715 16.339 23.919 16.1341 24.1612 16.1341H26.8387C27.081 16.1341 27.285 16.339 27.285 16.5887V22.0244H32.6719C32.9332 22.0244 33.15 22.2293 33.15 22.4726V25.1616Z"
                              fill="white" />
                    </svg>
                    <span class="btn-text">
                        add folder
                    </span>
                </button>
                <button class="btn-big-svg btn-icon-reset" data-action="upload" data-modal="#uploadModal" type="button">
                    <svg fill="none" height="42" viewBox="0 0 54 42" width="54" xmlns="http://www.w3.org/2000/svg">
                        <path d="M26.6205 17.8381C26.6656 17.781 26.7232 17.7349 26.789 17.7031C26.8548 17.6714 26.927 17.6549 27.0002 17.6549C27.0734 17.6549 27.1456 17.6714 27.2114 17.7031C27.2771 17.7349 27.3348 17.781 27.3799 17.8381L34.1299 26.2918C34.1855 26.3621 34.22 26.4465 34.2295 26.5354C34.239 26.6242 34.223 26.7139 34.1834 26.7942C34.1438 26.8745 34.0821 26.9421 34.0055 26.9893C33.9289 27.0366 33.8404 27.0615 33.7502 27.0614H29.2964L29.2964 41.5227C29.2964 41.7852 29.0794 42 28.8142 42L25.1982 42C24.933 42 24.716 41.7852 24.716 41.5227L24.716 27.0673H20.2502C19.8464 27.0673 19.6234 26.6079 19.8705 26.2977L26.6205 17.8381Z"
                              fill="white" />
                        <path d="M8.9558 12.3315C11.7161 5.12471 18.7493 -7.26548e-07 26.9879 0C35.2266 7.26548e-07 42.2598 5.11875 45.0201 12.3256C50.185 13.6679 54 18.3273 54 23.8636C54 30.456 48.606 35.7954 41.9525 35.7954H39.5357C39.2705 35.7954 39.0536 35.5807 39.0536 35.3182L39.0536 31.7386C39.0536 31.4761 39.2705 31.2614 39.5357 31.2614H41.9525C43.9835 31.2614 45.894 30.4619 47.3163 29.0122C48.7326 27.5685 49.4859 25.6236 49.4196 23.6071C49.3654 22.0321 48.823 20.5526 47.8406 19.3057C46.8342 18.0349 45.4239 17.1102 43.8569 16.6986L41.5728 16.108L40.735 13.9244C40.2167 12.5642 39.4935 11.2935 38.5835 10.142C37.6851 9.00081 36.6208 7.9976 35.4254 7.16506C32.9484 5.44091 30.0315 4.52812 26.9879 4.52812C23.9444 4.52812 21.0275 5.44091 18.5504 7.16506C17.3511 8.00028 16.2904 9.00255 15.3924 10.142C14.4824 11.2935 13.7592 12.5702 13.2408 13.9244L12.4092 16.102L10.131 16.6986C6.86451 17.5696 4.58036 20.5108 4.58036 23.8636C4.58036 25.8383 5.35781 27.6997 6.76808 29.0957C7.45969 29.7844 8.28243 30.3303 9.18865 30.7021C10.0949 31.0738 11.0666 31.2639 12.0475 31.2614H14.4643C14.7295 31.2614 14.9464 31.4761 14.9464 31.7386L14.9464 35.3182C14.9464 35.5807 14.7295 35.7954 14.4643 35.7954H12.0475C5.39397 35.7954 -5.71318e-07 30.456 0 23.8636C4.79287e-07 18.3332 3.8029 13.6798 8.9558 12.3315Z"
                              fill="white" />
                    </svg>
                    <span class="btn-text">
                        upload
                    </span>
                </button>

            </div>
            <div class="separator float-lt"></div>
            <div class="right-buttons float-lt">
                <button class="btn-big-svg btn-icon-reset" data-action="remove" data-modal="#removeFileModal"
                        disabled type="button">
                    <svg fill="none" height="42" viewBox="0 0 42 42" width="42" xmlns="http://www.w3.org/2000/svg">
                        <path clip-rule="evenodd"
                              d="M22.05 8.77086H36.75C38.1221 8.75104 39.445 9.37168 40.429 10.4969C41.413 11.6221 41.9779 13.1601 42 14.7743V35.9961C41.9779 37.6103 41.413 39.1483 40.429 40.2735C39.445 41.3987 38.1221 42.0194 36.75 41.9995H5.25C3.87788 42.0194 2.55499 41.3987 1.57101 40.2735C0.587019 39.1483 0.0221189 37.6103 0 35.9961V6.00386C0.0221189 4.38972 0.587019 2.85167 1.57101 1.72647C2.55499 0.601281 3.87788 -0.0193568 5.25 0.000460397H14.91C15.2202 0.00287358 15.5261 0.0860967 15.8056 0.244148C16.0852 0.4022 16.3316 0.631155 16.527 0.914558L22.05 8.77086ZM37.701 36.3826C37.7584 36.2465 37.7921 36.0983 37.8 35.9467V14.7743C37.7921 14.6227 37.7584 14.4745 37.701 14.3384C37.6436 14.2024 37.5636 14.0813 37.4657 13.9822C37.3678 13.8832 37.254 13.8083 37.1311 13.7618C37.0082 13.7154 36.8786 13.6984 36.75 13.7119H21C20.6898 13.7095 20.3839 13.6263 20.1044 13.4682C19.8248 13.3102 19.5784 13.0812 19.383 12.7978L13.923 4.94153H5.25C5.12141 4.92804 4.99182 4.94501 4.86889 4.99144C4.74597 5.03786 4.6322 5.11281 4.53432 5.21184C4.43643 5.31088 4.35641 5.43199 4.29899 5.56803C4.24157 5.70406 4.20791 5.85226 4.2 6.00386V35.9467C4.20791 36.0983 4.24157 36.2465 4.29899 36.3826C4.35641 36.5186 4.43643 36.6397 4.53432 36.7387C4.6322 36.8378 4.74597 36.9127 4.86889 36.9591C4.99182 37.0056 5.12141 37.0225 5.25 37.0091H36.75C36.8786 37.0225 37.0082 37.0056 37.1311 36.9591C37.254 36.9127 37.3678 36.8378 37.4657 36.7387C37.5636 36.6397 37.6436 36.5186 37.701 36.3826ZM15.3151 24.1943C15.7089 23.731 16.243 23.4707 16.8 23.4707H25.2C25.757 23.4707 26.2911 23.731 26.6849 24.1943C27.0788 24.6576 27.3 25.286 27.3 25.9412C27.3 26.5964 27.0788 27.2248 26.6849 27.6881C26.2911 28.1515 25.757 28.4117 25.2 28.4117H16.8C16.243 28.4117 15.7089 28.1515 15.3151 27.6881C14.9212 27.2248 14.7 26.5964 14.7 25.9412C14.7 25.286 14.9212 24.6576 15.3151 24.1943Z"
                              fill="white"
                              fill-rule="evenodd" />
                    </svg>
                    <span class="btn-text">
                        remove
                    </span>
                </button>
                <button class="btn-big-svg btn-icon-reset" data-action="rename" data-modal="#renameFileModal"
                        disabled type="button">
                    <svg fill="none" height="42" viewBox="0 0 42 42" width="42" xmlns="http://www.w3.org/2000/svg">
                        <path d="M35 32.6667H17.5L22.1667 28H35V32.6667ZM7 32.6667V26.8333L25.3867 8.51667C25.83 8.05 26.5767 8.05 27.0433 8.51667L31.15 12.6233C31.6167 13.09 31.6167 13.8133 31.15 14.28L12.7633 32.6667H7ZM37.3333 0H4.66667C2.07667 0 0 2.07667 0 4.66667V37.3333C0 38.571 0.491665 39.758 1.36683 40.6332C2.242 41.5083 3.42899 42 4.66667 42H37.3333C38.571 42 39.758 41.5083 40.6332 40.6332C41.5083 39.758 42 38.571 42 37.3333V4.66667C42 3.42899 41.5083 2.242 40.6332 1.36683C39.758 0.491665 38.571 0 37.3333 0Z"
                              fill="white" />
                    </svg>
                    <span class="btn-text">
                        rename
                    </span>
                </button>
                <button class="btn-big-svg btn-icon-reset" data-action="move" data-modal="#moveFileModal" disabled
                        type="button">
                    <svg fill="none" height="42" viewBox="0 0 40 42" width="40" xmlns="http://www.w3.org/2000/svg">
                        <path d="M21.0526 30H29.4737V24L40 33L29.4737 42V36H21.0526V30ZM18.9474 14H30.5263L18.9474 3V14ZM4.21053 0H21.0526L33.6842 12V20.68C32.3579 20.24 30.9474 20 29.4737 20C26.1236 20 22.9107 21.2643 20.5418 23.5147C18.1729 25.7652 16.8421 28.8174 16.8421 32C16.8421 35.08 18.0632 37.88 20.0632 40H4.21053C3.09382 40 2.02286 39.5786 1.23323 38.8284C0.443608 38.0783 0 37.0609 0 36V4C0 2.93913 0.443608 1.92172 1.23323 1.17157C2.02286 0.421427 3.09382 0 4.21053 0Z"
                              fill="white" />
                    </svg>
                    <span class="btn-text">
                        move
                    </span>
                </button>
            
            </div>
        </footer>
        <!-- Footer End -->
    </main>
    <!-- Main Panel End -->
<!-- Add Folder Modal Start -->
<div class="modal" id="addFolderModal">
    <div class="modal-header">
        <h3 class="modal-title float-lt">add folder</h3>
        <button class="close float-rt btn-icon-reset" data-close="modal" type="button">
            ×
        </button>
    </div>
    <form asp-action="CreateFolder" asp-controller="Folder" method="post">
        <div class="modal-body">
            <div class="input-field">
                <label for="folderName">Name</label>
                <input name="ParentId" type="hidden" value="@Model.FolderId" />
                <input name="Name" id="folderName" placeholder="Folder Name" type="text">
            </div>
            <div class="alert error">
                <strong>error!</strong>
                <span class="text"></span>
            </div>
        </div>
        <div class="modal-footer text-right">
            <button class="btn-secondary" id="addFolderBtn" type="submit">
                add
            </button>
            <button class="btn-outline" data-close="modal" type="button">
                cancel
            </button>
        </div>
    </form>
</div>
<!-- Upload Modal Start -->
<div class="modal upload-modal" id="uploadModal">
    <div class="modal-header">
        <h3 class="modal-title float-lt">uploading files</h3>
        <button class="close float-rt btn-icon-reset" data-close="modal" type="button">
            ×
        </button>
    </div>
    <form asp-action="CreateFile" asp-controller="File" method="post" enctype="multipart/form-data" id="uploadFilesForm">
        <div class="modal-body">

            <input type="hidden" value="@Model.FolderId" name="FolderId" />
            <div class="input-field">
                <label>
                    uploading files to :
                    <span class="uploading-folder badge">.../</span>
                </label>
                <label class="btn-upload text-center" for="uploadFilesBtn">
                    Select your files
                    <input id="uploadFilesBtn" name="FileUpload" multiple type="file">
                </label>
                <input name="FolderId" type="hidden" />
            </div>
        </div>
        <div class="modal-footer text-right">
            <button class="btn-secondary" id="uploadBtn" type="submit">
                upload
            </button>
            <button class="btn-outline" data-close="modal" type="button">
                cancel
            </button>
        </div>
    </form>
</div>

<!-- Upload Modal End -->
<!-- Edit File Modal Start -->
<div class="modal editor-modal" id="editorModal">
    <div class="modal-header">
        <h3 class="modal-title float-lt">edit file</h3>
        <button class="close float-rt btn-icon-reset" data-close="modal" type="button">
            ×
        </button>
    </div>
    <div class="modal-body">
        <div id="fm-editor">
            <div class="pending">loading content ...</div>
            <div class="line-numbers"></div>
            <textarea class="content-area"></textarea>
        </div>
        <div class="alert error">
            <strong>error!</strong>
            <span class="text"></span>
        </div>
    </div>
    <div class="modal-footer text-right">
        <button class="btn-secondary" id="updateFileBtn" type="button">
            save
        </button>
        <button class="btn-outline" data-close="modal" type="button">
            cancel
        </button>
    </div>
</div>
<!-- Edit File Modal End -->


